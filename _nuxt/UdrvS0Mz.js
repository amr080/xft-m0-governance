import{bu as I,bq as S,b4 as j,aj as N,r as x,N as B,e as W,bv as A,i as u,f as _,ad as E,g as O,w as $,j as F,O as V,l as o,F as C,m as R,h as b,t as q,Q as z,ap as L,a2 as T}from"./Tyql0LRw.js";import{u as D}from"./CEvEHNh7.js";import{a as K,b as Q}from"./yobR4Vdo.js";import{i as U,c as k}from"./DkocL5JY.js";async function G(t,n){var c;let e;if(typeof n.connector=="function"?e=t._internal.connectors.setup(n.connector):e=n.connector,e.uid===t.state.current)throw new I;try{t.setState(r=>({...r,status:"connecting"})),e.emitter.emit("message",{type:"connecting"});const s=await e.connect({chainId:n.chainId}),a=s.accounts;return e.emitter.off("connect",t._internal.events.connect),e.emitter.on("change",t._internal.events.change),e.emitter.on("disconnect",t._internal.events.disconnect),await((c=t.storage)==null?void 0:c.setItem("recentConnectorId",e.id)),t.setState(r=>({...r,connections:new Map(r.connections).set(e.uid,{accounts:a,chainId:s.chainId,connector:e}),current:e.uid,status:"connected"})),{accounts:a,chainId:s.chainId}}catch(s){throw t.setState(a=>({...a,status:a.current?"connected":"disconnected"})),s}}let w=[];function y(t){const n=t.connectors;return U(w,n)?w:(w=n,n)}function H(t,n){const{onChange:e}=n;return t._internal.connectors.subscribe((c,s)=>{e(Object.values(c),s)})}function J(t){return{mutationFn(n){return G(t,n)},mutationKey:["connect"]}}function P(t={}){const n=k(t),e=S(y(n));return H(n,{onChange(){e.value=y(n)}}),e}function X(t={}){const{mutation:n}=t,e=k(t),c=P({config:e}),s=J(e),{mutate:a,mutateAsync:r,...d}=K({...n,...s});return j(g=>{const h=e.subscribe(({status:i})=>i,(i,m)=>{m==="connected"&&i==="disconnected"&&d.reset()});g(h)}),{...d,connect:a,connectAsync:r,connectors:c}}const Y=N("/img/mobile/close-toggle.svg"),Z={key:0,id:"modal-backdrop",ref:"modal-backdrop",class:"fixed z-50 lg:z-40 inset-0 overflow-y-auto bg-grey-900"},ee={class:"flex items-center justify-center min-h-screen"},te={class:"flex flex-wrap flex-col"},ne={class:"bg-grey-900 text-white p-3 lg:p-6"},oe=o("p",{class:"text-3xl text-center"},"Connect Wallet",-1),se=o("p",{class:"font-inter text-center text-grey-500 leading-normal mt-2 max-sm:text-sm"}," Connect with one of our available wallet providers. ",-1),ce={class:"my-6 flex flex-wrap flex-col items-start"},ae=["disabled","data-test","onClick"],re={class:"flex justify-between items-center gap-4"},le=["src"],ie={class:"font-inter"},ue={class:"flex justify-center"},he={__name:"MModalWeb3Connect",setup(t){const n={"Brave Wallet":"/img/wallets/brave.svg","Coinbase Wallet":"/img/icon-coinbase.svg",Frame:"/img/wallets/frame.png",MetaMask:"/img/icon-metamask.svg",Safe:"/img/wallets/safe.svg",WalletConnect:"/img/icon-walletconnect.svg"},e=x(!1),c=x(null),s=B().getNetwork(),a=W(()=>s.value.rpc.chainId),{connector:r,isReconnecting:d}=D(),{switchChain:g}=Q(),{connect:h,connectors:i}=X({onError:p=>console.error("error",p.message),onSuccess:()=>{g({chainId:a})}}),m=()=>e.value=!0;return A(c,()=>e.value=!1),(p,f)=>{const M=T;return u(),_(C,null,[E(p.$slots,"default",{connect:m},()=>[O(M,{id:"button-connect-wallet","data-test":"modal-web3-button-connect-wallet",onClick:m},{default:$(()=>[F(" Connect Wallet ")]),_:1})]),(u(),V(L,{to:"body"},[e.value?(u(),_("div",Z,[o("div",ee,[o("div",{ref_key:"connectModal",ref:c,class:"w-full max-w-xl"},[o("div",te,[o("div",ne,[oe,se,o("div",ce,[(u(!0),_(C,null,R(b(i),l=>{var v;return u(),_("button",{key:l.uid,class:"flex justify-between hover:underline border-grey-700 border-t last:border-y border-dashed border-spacing-4 py-4 w-full text-left text-xl",disabled:b(d)||((v=b(r))==null?void 0:v.uid)===l.uid,"data-test":`modal-web3-connect-button-${l.name}`,onClick:me=>b(h)({connector:l})},[o("div",re,[o("img",{src:n[l.name],class:"max-h-6 w-6"},null,8,le),o("span",ie,q(l.name),1)])],8,ae)}),128))]),o("div",ue,[o("button",{class:"text-grey-200 self-end text-3xl p-2","data-test":"modal-web3-connect-button-close",onClick:f[1]||(f[1]=l=>e.value=!1)},[o("img",{src:Y,class:"max-h-24",onClick:f[0]||(f[0]=l=>e.value=!1)})])])])])],512)])],512)):z("",!0)]))],64)}}};export{he as _,Y as a};
